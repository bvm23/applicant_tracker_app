<section>
  <article class="controls">
    <at-action-button
      [icon]="closeBtnIcon"
      [size]="18"
      title="Close"
      (click)="onClose()"
    />
  </article>
  <article class="info">
    <h1>{{ applicant()?.name }}</h1>
    <div class="property-container">
      @for (entry of entries(); track $index) {
      <div class="property">
        <div class="key">
          <p [title]="entry[0]" class="key-data">
            {{ entry[0] === "hiringManager" ? "hiring manager" : entry[0] }}
          </p>
        </div>
        <div class="value" (click)="toggleValueMenu(entry[0])">
          @if(typeof entry[1]==='object' && entry[1].length>0){ @for (item of
          entry[1]; track $index){
          <p
            [title]="entry[1][$index]"
            [atHighlight]="entry[0]"
            [viewValue]="entry[1]"
            fontSize="14"
            class="value-data"
          >
            {{
              openedMenu() === entry[0]
                ? entry[1][$index] + "X"
                : entry[1][$index]
            }}
          </p>
          }}@else{
          <p [class]="{ 'empty-value': !entry[1] }" [title]="entry[1]">
            {{
              entry[0] === "added"
                ? (entry[1] | date : "medium")
                : entry[1]
                ? openedMenu() === entry[0]
                  ? entry[1] + "X"
                  : entry[1]
                : "empty"
            }}
          </p>
          }
        </div>
        @if (openedMenu()===entry[0]) {
        <at-popup-menu class="value-menu" backgroundColor="#272727">
          <div class="content">
            <span>select an option or create one</span>
            <div class="values">
              @for (item of openedMenuValues(); track $index) {
              <div class="value-holder" (click)="updateValue(entry[0], item)">
                <p class="value">
                  {{ item }}
                </p>
              </div>
              }
            </div>
          </div>
        </at-popup-menu>
        }
      </div>
      }
    </div>
    <article class="extras">
      <div class="comments">
        <h5>Comments</h5>
        <input
          type="text"
          name="comment"
          id="comment"
          placeholder="Add a comment..."
        />
        <div class="comments-container"></div>
      </div>
    </article>
  </article>
</section>
